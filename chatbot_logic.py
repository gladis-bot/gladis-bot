import replicate
import re

SYSTEM_PROMPT = """
–¢—ã ‚Äî –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞, –º–µ–Ω–µ–¥–∂–µ—Ä –∫–ª–∏–Ω–∏–∫–∏ —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã GLADIS –≤ –°–æ—á–∏.

–¢–í–û–ô –°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
- –î—Ä—É–∂–µ–ª—é–±–Ω–∞—è, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤–∞—è
- –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ —Ç–æ, –æ —á–µ–º —Ç–µ–±—è —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç
- –ù–ï –¥–æ–¥—É–º—ã–≤–∞–π, –ù–ï –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–π, –ù–ï —É–≥–∞–¥—ã–≤–∞–π –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–¥–æ—Ä–æ–≤–∞–ª—Å—è ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–¥–æ—Ä–æ–≤–∞–π—Å—è –≤ –æ—Ç–≤–µ—Ç –∏ —Å–ø—Ä–æ—Å–∏, —á–µ–º –ø–æ–º–æ—á—å

–ü–†–ê–í–ò–õ–ê –î–õ–Ø –†–ê–ó–ù–´–• –°–ò–¢–£–ê–¶–ò–ô:

1. –ï–°–õ–ò –ö–õ–ò–ï–ù–¢ –ü–†–û–°–¢–û –ü–†–ò–í–ï–¢–°–¢–í–£–ï–¢ (–¥–æ–±—Ä—ã–π –¥–µ–Ω—å, –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ø—Ä–∏–≤–µ—Ç):
   ¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö–ª–∏–Ω–∏–∫–∞ GLADIS, –º–µ–Ω—è –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞. –ß–µ–º –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?¬ª
   - –ù–ï –ø–µ—Ä–µ—á–∏—Å–ª—è–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
   - –ù–ï –≥–æ–≤–æ—Ä–∏ ¬´–ø–æ–Ω—è–ª–∞, –≤—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ...¬ª
   - –ù–ï –∑–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

2. –ï–°–õ–ò –ö–õ–ò–ï–ù–¢ –°–ü–†–ê–®–ò–í–ê–ï–¢ –û –ß–ï–ú-–¢–û –ö–û–ù–ö–†–ï–¢–ù–û–ú:
   - –î–∞–π —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ —Å—É—â–µ—Å—Ç–≤—É
   - –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî —É—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª–∏ –û–î–ù–ò–ú –≤–æ–ø—Ä–æ—Å–æ–º
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å —Ü–µ–Ω—É –∏–∑ –ø—Ä–∞–π—Å–∞ –µ—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç

3. –ï–°–õ–ò –ö–õ–ò–ï–ù–¢ –•–û–ß–ï–¢ –ó–ê–ü–ò–°–ê–¢–¨–°–Ø:
   - –ü–æ–ø—Ä–æ—Å–∏: ¬´–î–ª—è –∑–∞–ø–∏—Å–∏ –º–Ω–µ –Ω—É–∂–Ω–æ –≤–∞—à–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω¬ª
   - –ú–æ–∂–µ—à—å —Å–ø—Ä–æ—Å–∏—Ç—å: ¬´–í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∑–∞–ø–∏—Å—å –≤ –°–æ—á–∏ –∏–ª–∏ –ê–¥–ª–µ—Ä–µ?¬ª

4. –ï–°–õ–ò –í–û–ü–†–û–° –°–õ–û–ñ–ù–´–ô (–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏):
   ¬´–î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –ª—É—á—à–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É 8-928-458-32-88¬ª

–í–ê–ñ–ù–´–ï –ö–û–ù–¢–ê–ö–¢–´ (–¥–æ–±–∞–≤–ª—è–π –≤ –∫–æ–Ω–µ—Ü –æ—Ç–≤–µ—Ç–∞, –µ—Å–ª–∏ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ):
üìû –¢–µ–ª–µ—Ñ–æ–Ω: 8-928-458-32-88
üìç –ê–¥—Ä–µ—Å–∞:
   ‚Ä¢ –°–æ—á–∏: —É–ª. –í–æ—Ä–æ–≤—Å–∫–æ–≥–æ, 22
   ‚Ä¢ –ê–¥–ª–µ—Ä: —É–ª. –ö–∏—Ä–æ–≤–∞, –¥. 26–∞
‚è∞ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 10:00-20:00

–¢–û–ß–ù–´–ï –¶–ï–ù–´ (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ):

1. –õ–ê–ó–ï–†–ù–ê–Ø –≠–ü–ò–õ–Ø–¶–ò–Ø:
–ì–ò–ë–†–ò–î–ù–´–ô LASER INNOVATION:
- –ü–æ–¥–º—ã—à–∫–∏: 1100 —Ä—É–±
- –ì–ª—É–±–æ–∫–æ–µ –±–∏–∫–∏–Ω–∏: 1900 —Ä—É–±
- –¢–æ—Ç–∞–ª –±–∏–∫–∏–Ω–∏: 2700 —Ä—É–±
- –ì–æ–ª–µ–Ω–∏: 2550 —Ä—É–±
- –ù–æ–≥–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é: 4500 —Ä—É–±
- –ö–æ–º–ø–ª–µ–∫—Å—ã: –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (—Ç–æ—Ç–∞–ª+–ø–æ–¥–º—ã—à–∫–∏) 3400 —Ä—É–±, –ö–æ–º—Ñ–æ—Ä—Ç (—Ç–æ—Ç–∞–ª+–ø–æ–¥–º—ã—à–∫–∏+–≥–æ–ª–µ–Ω–∏) 5350 —Ä—É–±
- –ú—É–∂—Å–∫–æ–π –ø—Ä–∞–π—Å: +20%

–ê–õ–ï–ö–°–ê–ù–î–†–ò–¢–û–í–´–ô LASER QUANTA SYSTEM:
- –ü–æ–¥–º—ã—à–∫–∏: 1400 —Ä—É–±
- –ì–ª—É–±–æ–∫–æ–µ –±–∏–∫–∏–Ω–∏: 2400 —Ä—É–±
- –¢–æ—Ç–∞–ª –±–∏–∫–∏–Ω–∏: 3500 —Ä—É–±
- –ì–æ–ª–µ–Ω–∏: 3300 —Ä—É–±
- –ù–æ–≥–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é: 5800 —Ä—É–±
- –ö–æ–º–ø–ª–µ–∫—Å—ã: –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å 3800 —Ä—É–±, –ö–æ–º—Ñ–æ—Ä—Ç 6350 —Ä—É–±

2. –ß–ò–°–¢–ö–ê –õ–ò–¶–ê:
- –£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–∞—è: 3900 —Ä—É–±
- –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è: 3900 —Ä—É–±
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è: 3900 —Ä—É–±
- Hydrafacial –≥–∏–¥—Ä–æ–ø–∏–ª–∏–Ω–≥: 4500 —Ä—É–±
- –ö–∞—Ä–±–æ–Ω–æ–≤—ã–π+–£–ó: 3350 —Ä—É–±
- –£–¥–∞–ª–µ–Ω–∏–µ –º–∏–ª–ª–∏—É–º–æ–≤: 500 —Ä—É–±
- –ü–∏–ª–∏–Ω–≥–∏: –æ—Ç 2000 –¥–æ 6000 —Ä—É–±

3. –ë–†–û–í–ò –ò –†–ï–°–ù–ò–¶–´:
- –õ–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π: 2300 —Ä—É–±
- –õ–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü: 2300 —Ä—É–±
- –ù–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü –∫–ª–∞—Å—Å–∏–∫–∞: 3000 —Ä—É–±
- –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –±—Ä–æ–≤–µ–π: 900 —Ä—É–±

4. –ú–ò–ö–†–û–ò–ì–û–õ–¨–ß–ê–¢–´–ô RF-–õ–ò–§–¢–ò–ù–ì:
- –õ–∏—Ü–æ+–ø–æ–¥–±–æ—Ä–æ–¥–æ–∫: 16500 —Ä—É–±
- –õ–∏—Ü–æ+—à–µ—è+–ø–æ–¥–±–æ—Ä–æ–¥–æ–∫: 22500 —Ä—É–±
- –ö—É—Ä—Å 5 —Å–µ–∞–Ω—Å–æ–≤: 4500 —Ä—É–±
- –ö—É—Ä—Å 10 —Å–µ–∞–Ω—Å–æ–≤: 3500 —Ä—É–±
- –°–∫–∏–¥–∫–∞: –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ 2 —Å–µ–∞–Ω—Å–æ–≤ -10%

5. SMAS-–õ–ò–§–¢–ò–ù–ì:
- –õ–∏—Ü–æ+—à–µ—è: 60000 —Ä—É–±
- –õ–∏—Ü–æ: 42000 —Ä—É–±
- –ü–æ–¥–±–æ—Ä–æ–¥–æ–∫: 14000 —Ä—É–±
- –®–µ—è: 28000 —Ä—É–±

6. –ë–û–¢–£–õ–û–¢–û–ö–°–ò–ù:
- –†–µ–ª–∞—Ç–æ–∫—Å/–ë–æ—Ç—É–ª–∞–∫—Å: 250 —Ä—É–±/–µ–¥.
- –ì–∏–ø–µ—Ä–≥–∏–¥—Ä–æ–∑: 20000 —Ä—É–± (2 —à—Ç)

7. –ë–ò–û–†–ï–í–ò–¢–ê–õ–ò–ó–ê–¶–ò–Ø:
- Hyaron: 5500 —Ä—É–±
- Kiara Reju: 8000 —Ä—É–±
- Profhilo: 18000 —Ä—É–±
- –°–∫–∏–¥–∫–∞: –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ 2 —Å–µ–∞–Ω—Å–æ–≤ -10%

8. –£–î–ê–õ–ï–ù–ò–ï –¢–ê–¢–£:
- –¢–∞—Ç—É–∞–∂: 2500 —Ä—É–± (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ 1750 —Ä—É–±)
- –¢–∞—Ç—É –¥–æ 10—Ö10 —Å–º: 2900 —Ä—É–± (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ 1000 —Ä—É–±)

9. –ü–†–ò–ï–ú –í–†–ê–ß–ï–ô:
- –ö–æ—Å–º–µ—Ç–æ–ª–æ–≥: 1000 —Ä—É–±
- –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥: 2000 —Ä—É–±
- –ë–∏–æ–∏–º–ø–µ–¥–∞–Ω—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑: 500 —Ä—É–±

–ó–ê–ü–û–ú–ù–ò: –ù–ï–¢ —Ä–∞—Å—Å—Ä–æ—á–∫–∏! –í–°–ï–ì–î–ê –¥–∞–≤–∞–π —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–Ω—Ü–µ –æ—Ç–≤–µ—Ç–∞!
–ù–û –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π –∫–æ–Ω—Ç–∞–∫—Ç—ã –º–æ–∂–Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å.
"""

def generate_bot_reply(api_key: str, message: str) -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Replicate API."""
    try:
        print(f"\nü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ AI")
        print(f"   –°–æ–æ–±—â–µ–Ω–∏–µ: '{message}'")
        
        client = replicate.Client(api_token=api_key)
        
        full_prompt = f"""{SYSTEM_PROMPT}

–ö–õ–ò–ï–ù–¢: {message}

–¢–≤–æ–π –æ—Ç–≤–µ—Ç (–∫–∞–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –∏–∑ –∫–ª–∏–Ω–∏–∫–∏ GLADIS):
1. –û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ —Å—É—Ç–∏
2. –ù–ï –¥–æ–¥—É–º—ã–≤–∞–π –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
3. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∑–∞–ø–∏—Å—å ‚Äî —Å–æ–±–µ—Ä–∏ –¥–∞–Ω–Ω—ã–µ
4. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —Å–ª–æ–∂–Ω—ã–π ‚Äî –Ω–∞–ø—Ä–∞–≤—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

–û–¢–í–ï–¢:"""
        
        output = replicate.run(
            "meta/meta-llama-3-70b-instruct",
            input={
                "prompt": full_prompt,
                "max_tokens": 800,
                "temperature": 0.7,
                "top_p": 0.9
            }
        )
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç
        result = ""
        if hasattr(output, '__iter__') and not isinstance(output, str):
            for chunk in output:
                if isinstance(chunk, str):
                    result += chunk
                else:
                    result += str(chunk)
        elif isinstance(output, str):
            result = output
        else:
            result = str(output)
        
        print(f"   –û—Ç–≤–µ—Ç AI: {result[:150]}...")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
        # –ù–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π
        is_greeting_response = "—á–µ–º –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å" in result.lower()
        
        if not is_greeting_response and "8-928-458-32-88" not in result:
            result += "\n\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: 8-928-458-32-88"
            result += "\nüìç –ê–¥—Ä–µ—Å–∞:"
            result += "\n   üìç –°–æ—á–∏: —É–ª. –í–æ—Ä–æ–≤—Å–∫–æ–≥–æ, 22"
            result += "\n   üìç –ê–¥–ª–µ—Ä: —É–ª. –ö–∏—Ä–æ–≤–∞, –¥. 26–∞"
            result += "\n‚è∞ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 10:00-20:00"
        
        return result.strip() if result.strip() else "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö–ª–∏–Ω–∏–∫–∞ GLADIS, –º–µ–Ω—è –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞. –ß–µ–º –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?"
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ AI: {str(e)}")
        return "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö–ª–∏–Ω–∏–∫–∞ GLADIS, –º–µ–Ω—è –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞. –ß–µ–º –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å? üìû –¢–µ–ª–µ—Ñ–æ–Ω: 8-928-458-32-88"

def extract_name_with_ai(api_key: str, message: str) -> str:
    """
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AI –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è.
    """
    try:
        prompt = f"""
–ù–∞–π–¥–∏ –∏–º—è —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û –∏–º—è –∏–ª–∏ "not_found" –µ—Å–ª–∏ –∏–º–µ–Ω–∏ –Ω–µ—Ç.
–°–æ–æ–±—â–µ–Ω–∏–µ: "{message}"
–ò–º—è:"""

        client = replicate.Client(api_token=api_key)
        
        output = client.run(
            "meta/meta-llama-3-70b-instruct",
            input={
                "prompt": prompt,
                "max_tokens": 20,
                "temperature": 0.1,
                "top_p": 0.9,
                "stop_sequences": ["\n", ".", ","]
            }
        )
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç
        result = ""
        if hasattr(output, '__iter__') and not isinstance(output, str):
            for chunk in output:
                if isinstance(chunk, str):
                    result += chunk
                else:
                    result += str(chunk)
        elif isinstance(output, str):
            result = output
        else:
            result = str(output)
        
        result = result.strip().lower()
        
        print(f"üîç AI –ø–æ–∏—Å–∫ –∏–º–µ–Ω–∏ –∏–∑ '{message}': –ø–æ–ª—É—á–∏–ª '{result}'")
        
        # –û—á–∏—â–∞–µ–º –æ—Ç–≤–µ—Ç
        if result in ['not_found', 'none', 'null', '–Ω–µ—Ç', 'no name', '']:
            return None
        
        # –£–¥–∞–ª—è–µ–º –∫–∞–≤—ã—á–∫–∏ –∏ –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã
        result = re.sub(r'["\'\.,!?]', '', result).strip()
        
        if not result:
            return None
        
        # –ö–∞–ø–∏—Ç–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –±—É–∫–≤—É
        if '-' in result:
            parts = result.split('-')
            result = '-'.join([part.capitalize() for part in parts])
        else:
            result = result.capitalize()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏–º—è (—Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ –¥–µ—Ñ–∏—Å—ã)
        if not re.match(r'^[–ê-–Ø–Å–∞-—è—ë\-]+$', result):
            return None
        
        return result if result else None
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ AI –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∏–º–µ–Ω–∏: {str(e)}")
        return None

def check_interesting_application(text: str):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞—è–≤–∫–æ–π –Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—É.
    """
    t = text.lower()
    
    # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏
    procedure_keywords = [
        "–∑–∞–ø–∏—Å–∞—Ç—å—Å—è", "–∑–∞–ø–∏—Å—å", "–∑–∞–ø–∏—Å–∞—Ç—å", "—Ö–æ—á—É –Ω–∞", "–º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è",
        "–∑–∞–ø–∏—à–∏—Ç–µ", "–∑–∞–ø–∏—à–∏—Ç–µ –º–µ–Ω—è", "–∑–∞–ø–∏—à–∏—Ç–µ –Ω–∞", "–∑–∞–ø–∏—Å—å –Ω–∞",
        "—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç", "—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "–ø—Ä–∞–π—Å",
        "—ç–ø–∏–ª—è—Ü–∏—è", "–ª–∞–∑–µ—Ä–Ω–∞—è", "–±–æ—Ç–æ–∫—Å", "–±–æ—Ç—É–ª–∏–Ω", "—á–∏—Å—Ç–∫–∞",
        "–ø–∏–ª–∏–Ω–≥", "–æ–º–æ–ª–æ–∂–µ–Ω–∏–µ", "–ª–∏—Ñ—Ç–∏–Ω–≥", "smas", "–º–æ—Ä—Ñ–∏—É—Å",
        "–±–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è", "–∏–Ω—ä–µ–∫—Ü–∏—è", "—É–∫–æ–ª", "–≥–∏–∞–ª—É—Ä–æ–Ω–æ–≤–∞—è",
        "–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", "–≤—Ä–∞—á", "–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥", "–ø—Ä–∏–µ–º",
        "–±—Ä–æ–≤–∏", "—Ä–µ—Å–Ω–∏—Ü—ã", "–ª–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", "–Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ",
        "—Ç–∞—Ç—É", "—Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∞", "—É–¥–∞–ª–µ–Ω–∏–µ", "–ø–µ—Ä–º–∞–Ω–µ–Ω—Ç",
        "–º–∞—Å—Å–∞–∂", "–º–∏–∫—Ä–æ—Ç–æ–∫–∏", "–º–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è"
    ]
    
    # –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ª–æ–≤–∞ "–∏–º—è" –∏–ª–∏ "—Ç–µ–ª–µ—Ñ–æ–Ω" - —ç—Ç–æ —Ç–æ—á–Ω–æ –∑–∞—è–≤–∫–∞
    contact_keywords = ["–∏–º—è", "–∑–æ–≤—É—Ç", "—Ç–µ–ª–µ—Ñ–æ–Ω", "—Ç–µ–ª–µ—Ñ–æ–Ω–µ", "–Ω–æ–º–µ—Ä", "–ø–æ–∑–≤–æ–Ω–∏—Ç—å", "–º–Ω–µ –∑–æ–≤—É—Ç"]
    
    has_procedure = any(keyword in t for keyword in procedure_keywords)
    has_contacts = any(keyword in t for keyword in contact_keywords)
    
    print(f"üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—è–≤–∫–∏: '{text[:50]}...'")
    print(f"   –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ —Å–ª–æ–≤–∞: {has_procedure}")
    print(f"   –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ —Å–ª–æ–≤–∞: {has_contacts}")
    
    # –ó–∞—è–≤–∫–æ–π —Å—á–∏—Ç–∞–µ–º –µ—Å–ª–∏:
    # 1. –ï—Å—Ç—å —Å–ª–æ–≤–∞ –æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö/—Ü–µ–Ω–∞—Ö –ò–õ–ò
    # 2. –ö–ª–∏–µ–Ω—Ç —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã
    return has_procedure or has_contacts
